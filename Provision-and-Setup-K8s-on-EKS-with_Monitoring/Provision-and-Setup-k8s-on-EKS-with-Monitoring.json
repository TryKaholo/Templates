{"content":"{\"cells\":[{\"type\":\"devs.PMStartPoint\",\"size\":{\"width\":40,\"height\":39},\"outPorts\":[\" \"],\"inPorts\":[],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\" \"}}}]},\"position\":{\"x\":43,\"y\":-11},\"angle\":0,\"id\":\"5e47de0c-28b1-4133-aebf-640c30c0a2c7\",\"z\":1,\"attrs\":{\"rect\":{\"fill\":\"#2d3236\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":175,\"y\":-26},\"angle\":0,\"id\":\"dc833c06-3fd9-46cd-ba9b-adce8106b913\",\"z\":2,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Install AWS CLI\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Install AWS CLI\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":373,\"y\":-26},\"angle\":0,\"id\":\"93f0b633-adc7-4cf9-8f36-14d31cab910f\",\"z\":4,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Configure AWS CLI\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Configure AWS CLI\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":574,\"y\":-27},\"angle\":0,\"id\":\"d9c16356-2891-4407-b494-dbd0848f7faa\",\"z\":6,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Install eksctl\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Install eksctl\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":575,\"y\":124},\"angle\":0,\"id\":\"98602238-62c2-4f03-aad3-069eea9b3361\",\"z\":8,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Create Cluster\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Create Cluster\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":766,\"y\":-28},\"angle\":0,\"id\":\"b8b25117-a184-4c3e-9397-fb0132c8029b\",\"z\":9,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Install kubectl\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Install kubectl\"}}},{\"type\":\"link\",\"source\":{\"id\":\"d9c16356-2891-4407-b494-dbd0848f7faa\",\"port\":\"  \"},\"target\":{\"id\":\"b8b25117-a184-4c3e-9397-fb0132c8029b\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"2e50de67-7bd8-4dd0-9262-bad298eba3b2\",\"z\":10,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"dc833c06-3fd9-46cd-ba9b-adce8106b913\",\"port\":\"  \"},\"target\":{\"id\":\"93f0b633-adc7-4cf9-8f36-14d31cab910f\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"269d7d82-4ca8-4d86-9b13-6f8154e99608\",\"z\":22,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"93f0b633-adc7-4cf9-8f36-14d31cab910f\",\"port\":\"  \"},\"target\":{\"id\":\"d9c16356-2891-4407-b494-dbd0848f7faa\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"3dc5301b-7162-43b0-bb83-c77b064812cc\",\"z\":23,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":767,\"y\":124},\"angle\":0,\"id\":\"7a922633-6561-46c5-a021-ea69ebcc2163\",\"z\":25,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"fill\":\"#2d3236\"},\".label\":{\"text\":\"Install Prometheus\"},\".p_id\":{\"text\":\"61f91da34250e80034e2db6d\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Install Prometheus\"}}},{\"type\":\"link\",\"source\":{\"id\":\"b8b25117-a184-4c3e-9397-fb0132c8029b\",\"port\":\"  \"},\"target\":{\"id\":\"98602238-62c2-4f03-aad3-069eea9b3361\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"f08cc0b5-cfaf-4146-9af4-5b771a882c75\",\"z\":28,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"5e47de0c-28b1-4133-aebf-640c30c0a2c7\",\"port\":\" \"},\"target\":{\"id\":\"dc833c06-3fd9-46cd-ba9b-adce8106b913\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"b95ba0fe-342d-4006-bd49-78787d77f1df\",\"z\":30,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"98602238-62c2-4f03-aad3-069eea9b3361\",\"port\":\"  \"},\"target\":{\"id\":\"7a922633-6561-46c5-a021-ea69ebcc2163\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"2720775c-5ee2-4afd-8cbc-c5af42a5131a\",\"z\":31,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}}]}","code":"async function get_aws_access_key_id() {\r\n    kaholo.execution.configuration.aws_access_key_id = await kaholo.vault.getValueByKey(kaholo.execution.configuration.aws_access_key_id_vault_name)\r\n}\r\n\r\nasync function get_aws_secret_access_key() {\r\n    kaholo.execution.configuration.aws_secret_access_key = await kaholo.vault.getValueByKey(kaholo.execution.configuration.aws_secret_access_key_vault_name)\r\n}\r\n\r\n// Reads the aws access key id from Vault to make it available in the Pipeline.\r\nget_aws_access_key_id()\r\n\r\n// Reads the aws secret access key from Vault to make it available in the Pipeline.\r\nget_aws_secret_access_key()\r\n","plugins":[],"processes":[{"id":"62151ee04250e80034ee31b9","uuid":"dc833c06-3fd9-46cd-ba9b-adce8106b913","codeId":"commandline1","name":"Install AWS CLI","description":"Installs the AWS CLI. Required for eksctl.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Install AWS CLI","mandatory":true,"method":"execute","params":[{"value":null,"code":null,"id":"61f91da34250e80034e2db6f","_id":"61f91da34250e80034e2db6f","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61f91da34250e80034e2db6f","type":"string"},{"value":"apt-get install unzip && curl \"https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip\" -o \"awscliv2.zip\" && unzip -o awscliv2.zip && ./aws/install --update","code":null,"id":"61f91da34250e80034e2db70","_id":"61f91da34250e80034e2db70","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db70","type":"string"},{"value":null,"code":null,"id":"61f91da34250e80034e2db71","_id":"61f91da34250e80034e2db71","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61f91da34250e80034e2db71","type":"boolean"},{"value":null,"code":null,"id":"61f91da34250e80034e2db72","_id":"61f91da34250e80034e2db72","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61f91da34250e80034e2db72","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"62151ee04250e80034ee31bc","uuid":"93f0b633-adc7-4cf9-8f36-14d31cab910f","codeId":"commandline2","name":"Configure AWS CLI","description":"Configure AWS CLI with the provided Access Key ID and Secret Access Key","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Configure AWS CLI","mandatory":true,"method":"execute","params":[{"value":null,"code":null,"id":"61f91da34250e80034e2db6f","_id":"61f91da34250e80034e2db6f","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61f91da34250e80034e2db6f","type":"string"},{"value":"`aws configure set aws_access_key_id ${kaholo.execution.configuration.aws_access_key_id} && aws configure set aws_secret_access_key ${kaholo.execution.configuration.aws_secret_access_key} && aws configure set default.region ${kaholo.execution.configuration.region}`","code":true,"id":"61f91da34250e80034e2db70","_id":"61f91da34250e80034e2db70","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db70","type":"string"},{"value":true,"code":null,"id":"61f91da34250e80034e2db71","_id":"61f91da34250e80034e2db71","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61f91da34250e80034e2db71","type":"boolean"},{"value":"/bin/bash","code":null,"id":"61f91da34250e80034e2db72","_id":"61f91da34250e80034e2db72","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61f91da34250e80034e2db72","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"62151ee04250e80034ee31bf","uuid":"d9c16356-2891-4407-b494-dbd0848f7faa","codeId":"commandline3","name":"Install eksctl","description":"Install the eksctl utility used for creating the cluster.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Install eksctl","mandatory":true,"method":"executeCommands","params":[{"value":"curl --silent --location \"https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz\" | tar xz -C /tmp\nmv /tmp/eksctl /usr/local/bin","code":null,"id":"61f91da34250e80034e2db77","_id":"61f91da34250e80034e2db77","language":null,"viewName":"Commands","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db77","type":"text"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"621521234250e80034ee32ed","uuid":"98602238-62c2-4f03-aad3-069eea9b3361","codeId":"commandline4","name":"Create Cluster","description":"Create the EKS cluster with the provided configuration. In some cases, it might even take up to an hour.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":3600000,"name":"Create Cluster","mandatory":true,"method":"execute","params":[{"value":null,"code":null,"id":"61f91da34250e80034e2db6f","_id":"61f91da34250e80034e2db6f","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"61f91da34250e80034e2db6f","type":"string"},{"value":"`eksctl create cluster\\\n  --name ${kaholo.execution.configuration.cluster_name}\\\n  --region ${kaholo.execution.configuration.region}\\\n  --version 1.21\\\n  --node-type ${kaholo.execution.configuration.node_type}\\\n  --nodes ${kaholo.execution.configuration.num_nodes}\\\n  --node-volume-size ${kaholo.execution.configuration.node_volume_size_gb}\\\n  --node-ami-family ${kaholo.execution.configuration.node_image_family}`","code":true,"id":"61f91da34250e80034e2db70","_id":"61f91da34250e80034e2db70","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db70","type":"string"},{"value":true,"code":null,"id":"61f91da34250e80034e2db71","_id":"61f91da34250e80034e2db71","language":null,"viewName":"Wait For Close","name":"exitOnClose","required":false,"param":"61f91da34250e80034e2db71","type":"boolean"},{"value":"/bin/bash","code":null,"id":"61f91da34250e80034e2db72","_id":"61f91da34250e80034e2db72","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"61f91da34250e80034e2db72","type":"options"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"621521234250e80034ee32f3","uuid":"b8b25117-a184-4c3e-9397-fb0132c8029b","codeId":"commandline5","name":"Install kubectl","description":"Install kubectl for interacting with the cluster.","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Install kubectl","mandatory":true,"method":"executeCommands","params":[{"value":"curl -o kubectl https://amazon-eks.s3.us-west-2.amazonaws.com/1.21.2/2021-07-05/bin/linux/amd64/kubectl\nchmod +x ./kubectl\ncp ./kubectl /usr/bin/local","code":null,"id":"61f91da34250e80034e2db77","_id":"61f91da34250e80034e2db77","language":null,"viewName":"Commands","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db77","type":"text"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"62166f2f7191580032f48765","uuid":"7a922633-6561-46c5-a021-ea69ebcc2163","codeId":"commandline6","name":"Install Prometheus","description":"Install Prometheus and Grafana with their dashboards","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Install Prometheus","mandatory":true,"method":"executeCommands","params":[{"value":"curl https://raw.githubusercontent.com/helm/helm/main/scripts/get-helm-3 | bash\nhelm repo add prometheus-community https://prometheus-community.github.io/helm-charts\nhelm repo update\nhelm install --namespace default prometheus-stack prometheus-community/kube-prometheus-stack","code":null,"id":"61f91da34250e80034e2db77","_id":"61f91da34250e80034e2db77","language":null,"viewName":"Commands","name":"COMMANDS","required":false,"param":"61f91da34250e80034e2db77","type":"text"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.0.2"},"correlateAgents":null,"numProcessParallel":""}],"configurations":[{"name":"Default","value":"{\n    \"aws_access_key_id_vault_name\": \"aws_access_key_id\",\n    \"aws_secret_access_key_vault_name\": \"aws_secret_access_key\",\n    \"cluster_name\": \"mycluster\",\n    \"region\": \"us-east-1\",\n    \"k8s_version\": \"1.21\",\n    \"node_type\": \"t2.medium\",\n    \"num_nodes\": \"3\",\n    \"node_volume_size_gb\": \"50\",\n    \"node_image_family\": \"Ubuntu2004\"\n}","_id":"621e4c597191580032f7af03"}],"links":[{"uuid":"2e50de67-7bd8-4dd0-9262-bad298eba3b2","sourceId":"d9c16356-2891-4407-b494-dbd0848f7faa","targetId":"b8b25117-a184-4c3e-9397-fb0132c8029b"},{"uuid":"269d7d82-4ca8-4d86-9b13-6f8154e99608","sourceId":"dc833c06-3fd9-46cd-ba9b-adce8106b913","targetId":"93f0b633-adc7-4cf9-8f36-14d31cab910f"},{"uuid":"3dc5301b-7162-43b0-bb83-c77b064812cc","sourceId":"93f0b633-adc7-4cf9-8f36-14d31cab910f","targetId":"d9c16356-2891-4407-b494-dbd0848f7faa"},{"uuid":"f08cc0b5-cfaf-4146-9af4-5b771a882c75","sourceId":"b8b25117-a184-4c3e-9397-fb0132c8029b","targetId":"98602238-62c2-4f03-aad3-069eea9b3361"},{"uuid":"b95ba0fe-342d-4006-bd49-78787d77f1df","sourceId":"5e47de0c-28b1-4133-aebf-640c30c0a2c7","targetId":"dc833c06-3fd9-46cd-ba9b-adce8106b913"},{"uuid":"2720775c-5ee2-4afd-8cbc-c5af42a5131a","sourceId":"98602238-62c2-4f03-aad3-069eea9b3361","targetId":"7a922633-6561-46c5-a021-ea69ebcc2163"}],"used_plugins":[{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"},{"name":"CommandLine","version":"3.0.2"}],"exportedPipeline":{"description":"This pipeline will create an EKS cluster in your AWS account. The cluster can be configured through configuration variables. To authenticate the pipeline, the \"AWS Access Key Id\" and the \"AWS Secret Access Key\" must be added to the Vault. The \"Create Cluster\" step can take anywhere around 15-60 mins, more or less, depending upon the cluster configuration and the region where the cluster is to be created.","queue":null}}