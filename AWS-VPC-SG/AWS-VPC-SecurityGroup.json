{"content":"{\"cells\":[{\"type\":\"devs.PMStartPoint\",\"size\":{\"width\":40,\"height\":39},\"outPorts\":[\" \"],\"inPorts\":[],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\" \"}}}]},\"position\":{\"x\":82,\"y\":-417},\"angle\":0,\"id\":\"e184f5f0-7335-49f0-859a-2ab1fc71626d\",\"z\":1,\"attrs\":{\"rect\":{\"fill\":\"#2d3236\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":442,\"y\":-431},\"angle\":0,\"id\":\"389d610c-a980-4702-b4ba-658ab885a3b6\",\"z\":15,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill\":\"#000\",\"fill-opacity\":0.5,\"invalid-action\":false},\".warning\":{\"display\":\"none\"},\".label\":{\"text\":\"Clone TF\"},\".p_id\":{\"text\":\"61f311d0ac146900320bb380\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Clone TF\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":659,\"y\":-431},\"angle\":0,\"id\":\"d003b2c0-f7a8-44cc-afa8-1b11e64f3fb8\",\"z\":18,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"invalid-action\":false},\".warning\":{\"display\":\"none\"},\".label\":{\"text\":\"TF Init\"},\".p_id\":{\"text\":\"61f312a9ac146900320bbd4d\"},\"image\":{\"xlink:href\":\"/plugins/Terraform-CLI/logo.png\",\"ref-y\":50},\"text\":{\"text\":\"TF Init\"}}},{\"type\":\"link\",\"source\":{\"id\":\"389d610c-a980-4702-b4ba-658ab885a3b6\",\"port\":\"  \"},\"target\":{\"id\":\"d003b2c0-f7a8-44cc-afa8-1b11e64f3fb8\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"0a4b9c46-cfa4-41d6-97fb-f0a93261ea47\",\"z\":19,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":857,\"y\":-431},\"angle\":0,\"id\":\"4ef8ba9b-7d08-494e-8ed6-cba1acf30ba3\",\"z\":20,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill\":\"#000\",\"fill-opacity\":0.5,\"invalid-action\":false},\".warning\":{\"display\":\"none\"},\".label\":{\"text\":\"TF Apply\"},\".p_id\":{\"text\":\"61f312a9ac146900320bbd4d\"},\"image\":{\"xlink:href\":\"/plugins/Terraform-CLI/logo.png\",\"ref-y\":50},\"text\":{\"text\":\"TF Apply\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":241,\"y\":-428},\"angle\":0,\"id\":\"0fdaa3d3-c4a4-490d-a3e5-7dbc5a9fb824\",\"z\":22,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5,\"invalid-action\":false},\".warning\":{\"display\":\"none\"},\".label\":{\"text\":\"Remove tmp\"},\".p_id\":{\"text\":\"61f311d0ac146900320bb380\"},\"image\":{\"xlink:href\":\"/plugins/CommandLine/CommandLine.png\",\"ref-y\":50},\"text\":{\"text\":\"Remove tmp\"}}},{\"type\":\"link\",\"source\":{\"id\":\"0fdaa3d3-c4a4-490d-a3e5-7dbc5a9fb824\",\"port\":\"  \"},\"target\":{\"id\":\"389d610c-a980-4702-b4ba-658ab885a3b6\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"939b8a95-33ef-4dd2-88b9-79774b074cff\",\"z\":27,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"d003b2c0-f7a8-44cc-afa8-1b11e64f3fb8\",\"port\":\"  \"},\"target\":{\"id\":\"4ef8ba9b-7d08-494e-8ed6-cba1acf30ba3\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"a4837f46-d4b8-4ad6-9d66-e5dd2ca1c2fa\",\"z\":28,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"e184f5f0-7335-49f0-859a-2ab1fc71626d\",\"port\":\" \"},\"target\":{\"id\":\"0fdaa3d3-c4a4-490d-a3e5-7dbc5a9fb824\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"cf1f2d79-d055-465d-926e-260a14f74372\",\"z\":35,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}}]}","code":"async function getAWSCredentials(domain_name, access_key, secret_key){\n    var domain_name = \"domain_name=\"+domain_name;\n    var access_key = \"access_key=\"+await kaholo.vault.getValueByKey(access_key);\n    var secret_key = \"secret_key=\"+await kaholo.vault.getValueByKey(secret_key);\n    return domain_name + \"\\n\" + access_key + \"\\n\" + secret_key;\n}","plugins":[],"processes":[{"id":"62bc4920fefd0c0032cbefe7","uuid":"389d610c-a980-4702-b4ba-658ab885a3b6","codeId":"commandline3","name":"Clone TF","description":"","mandatory":false,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Clone TF","mandatory":false,"method":"execute","params":[{"value":"/tmp","code":null,"id":"62431b533781dc00323e6e7f","_id":"62431b533781dc00323e6e7f","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"62431b533781dc00323e6e7f","type":"string"},{"value":"git clone https://github.com/TryKaholo/Templates.git","code":null,"id":"62431b533781dc00323e6e80","_id":"62431b533781dc00323e6e80","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"62431b533781dc00323e6e80","type":"text"},{"value":null,"code":null,"id":"62431b533781dc00323e6e81","_id":"62431b533781dc00323e6e81","language":null,"viewName":"Finish Signal","name":"finishSignal","required":false,"param":"62431b533781dc00323e6e81","type":"options"},{"value":null,"code":null,"id":"62431b533781dc00323e6e84","_id":"62431b533781dc00323e6e84","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"62431b533781dc00323e6e84","type":"options"}],"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.1.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"62bc4920fefd0c0032cbefec","uuid":"d003b2c0-f7a8-44cc-afa8-1b11e64f3fb8","codeId":"terraformcli3","name":"TF Init","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"TF Init","mandatory":true,"method":"executeTerraformInit","params":[{"value":"/tmp/Templates/AWS-ACM/tf_scripts","code":null,"id":"61f312a9ac146900320bbd4f","_id":"61f312a9ac146900320bbd4f","language":null,"viewName":"Working Directory","name":"PATH","required":false,"param":"61f312a9ac146900320bbd4f","type":"string"},{"value":null,"code":null,"id":"61f312a9ac146900320bbd50","_id":"61f312a9ac146900320bbd50","language":null,"viewName":"Upgrade","name":"UPGRADE","required":false,"param":"61f312a9ac146900320bbd50","type":"boolean"}],"numParallel":""}],"used_plugin":{"name":"Terraform-CLI","version":"1.1.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"62bc4920fefd0c0032cbeff0","uuid":"4ef8ba9b-7d08-494e-8ed6-cba1acf30ba3","codeId":"terraformcli4","name":"TF Apply","description":"Add the domain_name to the function in \"Vars\"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"TF Apply","mandatory":true,"method":"executeTerraformApply","params":[{"value":"/tmp/Templates/AWS-ACM/tf_scripts","code":null,"id":"61f312a9ac146900320bbd52","_id":"61f312a9ac146900320bbd52","language":null,"viewName":"Working Directory","name":"PATH","required":false,"param":"61f312a9ac146900320bbd52","type":"string"},{"value":"getAWSCredentials(\"example.com\",\"access_key\", \"secret_key\")","code":true,"id":"61f312a9ac146900320bbd53","_id":"61f312a9ac146900320bbd53","language":null,"viewName":"Vars","name":"VAR","required":false,"param":"61f312a9ac146900320bbd53","type":"text"},{"value":null,"code":null,"id":"61f312a9ac146900320bbd54","_id":"61f312a9ac146900320bbd54","language":null,"viewName":"Var file","name":"VARFILE","required":false,"param":"61f312a9ac146900320bbd54","type":"string"},{"value":null,"code":null,"id":"61f312a9ac146900320bbd55","_id":"61f312a9ac146900320bbd55","language":null,"viewName":"Other Flags","name":"OTHER","required":false,"param":"61f312a9ac146900320bbd55","type":"string"}],"numParallel":""}],"used_plugin":{"name":"Terraform-CLI","version":"1.1.2"},"correlateAgents":null,"numProcessParallel":""},{"id":"62bc4920fefd0c0032cbeff6","uuid":"0fdaa3d3-c4a4-490d-a3e5-7dbc5a9fb824","codeId":"Remove","name":"Remove tmp","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Remove tmp","mandatory":true,"method":"execute","params":[{"value":"/tmp","code":null,"id":"61f311d0ac146900320bb382","_id":"61f311d0ac146900320bb382","language":null,"viewName":"Working Directory","name":"workingDir","required":false,"param":"620bcb69ac1469003215bf0e","type":"string"},{"value":"rm -rf kaholo_templates","code":null,"id":"61f311d0ac146900320bb383","_id":"61f311d0ac146900320bb383","language":null,"viewName":"Command","name":"COMMANDS","required":false,"param":"620bcb69ac1469003215bf0f","type":"text"},{"value":null,"code":null,"id":"620bcb69ac1469003215bf10","_id":"620bcb69ac1469003215bf10","language":null,"viewName":"Finish Signal","name":"finishSignal","required":false,"param":"620bcb69ac1469003215bf10","type":"options"},{"value":null,"code":null,"id":"61f311d0ac146900320bb385","_id":"61f311d0ac146900320bb385","language":null,"viewName":"Shell Type","name":"shell","required":false,"param":"620bcb69ac1469003215bf13","type":"options"}],"numParallel":""}],"used_plugin":{"name":"CommandLine","version":"3.1.2"},"correlateAgents":null,"numProcessParallel":""}],"configurations":[],"links":[{"uuid":"0a4b9c46-cfa4-41d6-97fb-f0a93261ea47","sourceId":"389d610c-a980-4702-b4ba-658ab885a3b6","targetId":"d003b2c0-f7a8-44cc-afa8-1b11e64f3fb8"},{"uuid":"939b8a95-33ef-4dd2-88b9-79774b074cff","sourceId":"0fdaa3d3-c4a4-490d-a3e5-7dbc5a9fb824","targetId":"389d610c-a980-4702-b4ba-658ab885a3b6"},{"uuid":"a4837f46-d4b8-4ad6-9d66-e5dd2ca1c2fa","sourceId":"d003b2c0-f7a8-44cc-afa8-1b11e64f3fb8","targetId":"4ef8ba9b-7d08-494e-8ed6-cba1acf30ba3"},{"uuid":"cf1f2d79-d055-465d-926e-260a14f74372","sourceId":"e184f5f0-7335-49f0-859a-2ab1fc71626d","targetId":"0fdaa3d3-c4a4-490d-a3e5-7dbc5a9fb824"}],"used_plugins":[{"name":"CommandLine","version":"3.1.2"},{"name":"Terraform-CLI","version":"1.1.2"},{"name":"Terraform-CLI","version":"1.1.2"},{"name":"CommandLine","version":"3.1.2"}],"executionInputs":[],"exportedPipeline":{"description":"This template can be used to create AWS Certificate Manager(ACM). This template uses terraform module to create acm.\n\nBefore executing, Click on TF Apply action and add appropriate values to the function getAWSCredentials()\nExample: getAWSCredentials(domain_name, aws_vault_access_key, aws_vault_secret_key)\n             - domain_name: domain_name that is registered in the AWS Route53\n             - aws_vault_access_key: AWS Access Key which is available in the Kaholo's Vault.\n             - aws_vault_secret_key: AWS Secret Key which is available in the Kaholo's Vault.","queue":null}}
